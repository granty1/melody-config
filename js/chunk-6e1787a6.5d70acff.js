(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6e1787a6"],{"064b":function(e,t,l){"use strict";var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-collapse-item",{attrs:{disabled:e.disabled,name:e.p+"-"+e.title}},[l("template",{slot:"title"},[l("div",{staticStyle:{width:"100%","font-size":"16px"},on:{click:e.modify}},[e._v(" "+e._s(e.title)+" ")])]),e._t("default")],2)],1)},o=[],s=l("4360");function i(e){s["a"].commit("modifyActiveCards",e)}var r={data(){return{p:""===this.prefix?this.$route.name:this.prefix}},props:{title:{type:String,default:""},disabled:{type:Boolean,default:!1},remember:{type:Boolean,default:!0},prefix:{type:String,default:""}},methods:{modify(){this.remember&&(""===this.prefix?i(this.$route.name+"-"+this.title):i(this.prefix+"-"+this.title))}}},c=r,n=(l("37b0"),l("2877")),d=Object(n["a"])(c,a,o,!1,null,"74180b3e",null);t["a"]=d.exports},"37b0":function(e,t,l){"use strict";var a=l("5f02"),o=l.n(a);o.a},"5f02":function(e,t,l){},"6c4f":function(e,t,l){"use strict";function a(e,t,l){return"undefined"===typeof t||""==t||/^\d+(ns|us|µs|ms|s|m|h)$/.test(t)?l():l(new Error("该字段必须以ns、us或µs、ms、s、m、h时间单位结尾，例如300ms"))}function o(e,t,l){return"undefined"===typeof t||""==t||/^[0-9]*$/.test(t)?l():l(new Error("该字段不能包含除数字以外的其他字符"))}l.d(t,"b",(function(){return a})),l.d(t,"a",(function(){return o}))},9641:function(e,t,l){"use strict";var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-card",{staticClass:"box-card item"},[l("el-collapse",{attrs:{value:e.activeList}},[e._t("default")],2)],1)],1)},o=[],s={computed:{activeList(){return this.$ls.get("active_cards")}}},i=s,r=l("2877"),c=Object(r["a"])(i,a,o,!1,null,"db2c75f6",null);t["a"]=c.exports},fd5f:function(e,t,l){"use strict";l.r(t);var a=function(){var e=this,t=e.$createElement,l=e._self._c||t;return l("div",[l("el-form",{ref:"config",attrs:{"label-position":"top",model:e.melody_etcd,rules:e.etcdRules,"status-icon":""}},[l("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-around"}},[l("el-col",{staticClass:"container",attrs:{span:11}},[l("melody-card",[l("melody-card-item",{attrs:{title:"Available hosts"}},[l("div",{staticClass:"fs12"},[e._v(" 在此处添加Melody用于检索数据的所有地址，以及是否由服务发现解决的地址： ")]),l("el-radio-group",{attrs:{size:"small"},model:{value:e.curSDType,callback:function(t){e.curSDType=t},expression:"curSDType"}},[l("el-radio-button",{attrs:{label:"Static address resolution"}},[e._v(" Static address resolution ")]),l("el-radio-button",{attrs:{label:"Etcd",disabled:!e.etcdEnable}},[e._v(" Etcd ")]),l("el-radio-button",{attrs:{label:"DNS SRV"}},[e._v(" DNS SRV ")]),l("el-radio-button",{attrs:{label:"Custom service discovery"}},[e._v(" Custom service discovery ")])],1),l("el-input",{staticStyle:{"margin-top":"10px","margin-bottom":"10px"},attrs:{placeholder:"address"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.saveAvailableHosts(t)}},model:{value:e.curAvailableHost,callback:function(t){e.curAvailableHost=t},expression:"curAvailableHost"}},[l("template",{slot:"prepend"},[l("el-checkbox",{model:{value:e.disableSanitize,callback:function(t){e.disableSanitize=t},expression:"disableSanitize"}},[e._v("disable sanitize")])],1)],2),l("div",e._l(e.availableHosts,(function(t,a){return l("el-tag",{key:a,style:0==a?{}:{"margin-left":"10px"},attrs:{closable:"",type:"info"},on:{close:function(l){return e.handleAvailableHostsTagClose(t)}}},[e._v(" "+e._s(t)+" ")])})),1),l("div",{staticClass:"fs12"},[e._v(" Melody连接到的地址。一些有效的示例: "),l("code",[e._v("https://myapi")]),e._v("，"),l("code",[e._v("amqp://host")]),e._v("， "),l("code",[e._v("192.0.2.1:25")]),e._v("，"),l("code",[e._v("my.service.tld")]),e._v("。 ")]),l("div",{staticClass:"fs12"},[e._v(" 当不需要为协议检查地址字符串时，请选择disable sanitize。 ")])],1)],1)],1),l("el-col",{staticClass:"container",attrs:{span:11}},[l("melody-card",[l("melody-card-item",{attrs:{title:"Etcd middleware"}},[l("el-switch",{model:{value:e.etcdEnable,callback:function(t){e.etcdEnable=t},expression:"etcdEnable"}}),e.etcdEnable?[l("el-form-item",{attrs:{label:"Available etcd machines"}},[l("el-input",{attrs:{placeholder:"http://example.com:4001"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.saveMachine(t)}},model:{value:e.curMachine,callback:function(t){e.curMachine=t},expression:"curMachine"}}),l("div",{staticClass:"fs12"},[e._v(" Etcd servers you want Melody to make use of for host resolution ")]),l("div",{staticClass:"fs12"},[l("code",[e._v("http(s)://hostname[:port]")])]),e._l(e.melody_etcd.machines,(function(t,a){return l("el-tag",{key:a,style:0==a?{}:{"margin-left":"10px"},attrs:{closable:"",type:"info"},on:{close:function(l){return e.handleMachinesTagClose(t)}}},[e._v(" "+e._s(t)+" ")])}))],2),l("el-form-item",{attrs:{label:"Dial Timeout",prop:"dial_timeout"}},[l("el-input",{attrs:{placeholder:"5s"},model:{value:e.melody_etcd.dial_timeout,callback:function(t){e.$set(e.melody_etcd,"dial_timeout",t)},expression:"melody_etcd.dial_timeout"}}),l("div",{staticClass:"fs12"},[e._v(" Dial timeout includes name resolution. ")])],1),l("el-form-item",{attrs:{label:"Dial Keep Alive",prop:"dial_keepalive"}},[l("el-input",{attrs:{placeholder:"30s"},model:{value:e.melody_etcd.dial_keepalive,callback:function(t){e.$set(e.melody_etcd,"dial_keepalive",t)},expression:"melody_etcd.dial_keepalive"}}),l("div",{staticClass:"fs12"},[e._v(" KeepAlive specifies the keep-alive period for an active network connection. If zero, keep-alives are not enabled. ")])],1),l("el-form-item",{attrs:{label:"Timeout per request",prop:"header_timeout"}},[l("el-input",{attrs:{placeholder:"1s"},model:{value:e.melody_etcd.header_timeout,callback:function(t){e.$set(e.melody_etcd,"header_timeout",t)},expression:"melody_etcd.header_timeout"}}),l("div",{staticClass:"fs12"},[e._v(" Header sent to determine the maximum timeout per request ")])],1),l("el-form-item",{attrs:{label:"Certificate"}},[l("el-input",{attrs:{placeholder:"/path/to/file"},model:{value:e.melody_etcd.cert,callback:function(t){e.$set(e.melody_etcd,"cert",t)},expression:"melody_etcd.cert"}}),l("div",{staticClass:"fs12"},[e._v(" Absolute path to the certificate ")])],1),l("el-form-item",{attrs:{label:"Private key"}},[l("el-input",{attrs:{placeholder:"/path/to/file"},model:{value:e.melody_etcd.key,callback:function(t){e.$set(e.melody_etcd,"key",t)},expression:"melody_etcd.key"}}),l("div",{staticClass:"fs12"},[e._v(" Absolute path to the private key ")])],1),l("el-form-item",{attrs:{label:"CA Cert"}},[l("el-input",{attrs:{placeholder:"/path/to/file"},model:{value:e.melody_etcd.cacert,callback:function(t){e.$set(e.melody_etcd,"cacert",t)},expression:"melody_etcd.cacert"}}),l("div",{staticClass:"fs12"},[e._v(" Absolute path to the CA Cert ")])],1)]:e._e()],2)],1),l("melody-card",[l("melody-card-item",{attrs:{title:"Consul middleware"}},[l("el-switch",{model:{value:e.consulEnable,callback:function(t){e.consulEnable=t},expression:"consulEnable"}}),e.consulEnable?[l("el-form-item",{attrs:{label:"Consul address"}},[l("el-input",{attrs:{placeholder:"http://example.com:8500"},model:{value:e.melody_consul.address,callback:function(t){e.$set(e.melody_consul,"address",t)},expression:"melody_consul.address"}}),l("div",{staticClass:"fs12"},[e._v(" Consul服务的地址 ")])],1),l("el-form-item",{attrs:{label:"Prefix name"}},[l("el-input",{attrs:{placeholder:"Melody"},model:{value:e.melody_consul.name,callback:function(t){e.$set(e.melody_consul,"name",t)},expression:"melody_consul.name"}}),l("div",{staticClass:"fs12"},[e._v(" Consul服务的前缀名 ")])],1),l("el-switch",{attrs:{"active-text":"Bloom Filter"},model:{value:e.bfEnable,callback:function(t){e.bfEnable=t},expression:"bfEnable"}}),e.bfEnable?[l("el-form-item",{attrs:{label:"N"}},[l("el-input",{attrs:{placeholder:"10000000"},model:{value:e.melody_bloomfilter.N,callback:function(t){e.$set(e.melody_bloomfilter,"N",t)},expression:"melody_bloomfilter.N"}}),l("div",{staticClass:"fs12"},[e._v(" 在布隆过滤器中保存的元素个数的最大值。 ")])],1),l("el-form-item",{attrs:{label:"P"}},[l("el-input",{attrs:{placeholder:"0.0001"},model:{value:e.melody_bloomfilter.P,callback:function(t){e.$set(e.melody_bloomfilter,"P",t)},expression:"melody_bloomfilter.P"}}),l("div",{staticClass:"fs12"},[e._v(" 布隆过滤器的失误率。 ")])],1),l("el-form-item",{attrs:{label:"HashName"}},[l("el-input",{attrs:{placeholder:"optimal or default"},model:{value:e.melody_bloomfilter.HashName,callback:function(t){e.$set(e.melody_bloomfilter,"HashName",t)},expression:"melody_bloomfilter.HashName"}}),l("div",{staticClass:"fs12"},[e._v(' "default"或者"optimal". ')])],1),l("el-form-item",{attrs:{label:"TTL"}},[l("el-input",{attrs:{placeholder:"1500"},model:{value:e.melody_bloomfilter.TTL,callback:function(t){e.$set(e.melody_bloomfilter,"TTL",t)},expression:"melody_bloomfilter.TTL"}}),l("div",{staticClass:"fs12"},[e._v(" 布隆过滤器中JWT的存在时长，以秒为单位。该值必须与签名时设置的到期时间相同。 ")])],1),l("el-form-item",{attrs:{label:"Port"}},[l("el-input",{attrs:{placeholder:"9999"},model:{value:e.melody_bloomfilter.port,callback:function(t){e.$set(e.melody_bloomfilter,"port",t)},expression:"melody_bloomfilter.port"}}),l("div",{staticClass:"fs12"},[e._v(" RPC服务与布隆过滤器进行通信时的端口号. ")])],1)]:e._e()]:e._e()],2)],1)],1)],1)],1)],1)},o=[],s=l("9641"),i=l("064b"),r=l("6c4f"),c={name:"sd",data(){let e=this.$store.getters.serviceConfig,t={machines:["http://127.0.0.1:2379"],dial_timeout:"5s",dial_keepalive:"30s",header_timeout:"1s",cert:"",key:"",cacert:""},l={address:"http://127.0.0.1:8500",name:"Melody"},a={N:1e7,P:1e-4,HashName:"optimal",TTL:1500,port:9999};return{melody_etcd:void 0==e.extra_config.melody_etcd?t:e.extra_config.melody_etcd,melody_consul:void 0==e.extra_config.melody_consul?l:e.extra_config.melody_consul,melody_bloomfilter:void 0==e.extra_config.melody_bloomfilter?a:e.extra_config.melody_bloomfilter,etcdRules:{dial_timeout:[{validator:r["b"],trigger:"blur"}],dial_keepalive:[{validator:r["b"],trigger:"blur"}],header_timeout:[{validator:r["b"],trigger:"blur"}]},curSDType:"Static address resolution",curAvailableHost:"",availableHosts:this.$store.getters.availableHosts,disableSanitize:!1,etcdEnable:void 0!==e.extra_config.melody_etcd,consulEnable:void 0!==e.extra_config.melody_consul,bfEnable:void 0!==e.extra_config.melody_bloomfilter,curMachine:""}},components:{MelodyCard:s["a"],MelodyCardItem:i["a"]},methods:{saveAvailableHosts(){-1==this.availableHosts.indexOf(this.curSDType.split(" ")[0]+" - "+this.curAvailableHost)?(this.availableHosts.push(this.curSDType.split(" ")[0]+" - "+this.curAvailableHost),this.$store.commit("setAvailableHosts",this.availableHosts),this.curAvailableHost=""):this.$message({message:"请勿重复添加"})},saveMachine(){-1==this.melody_etcd.machines.indexOf(this.curMachine)?(this.melody_etcd.machines.push(this.curMachine),this.curMachine=""):this.$message({message:"请勿重复添加"})},handleAvailableHostsTagClose(e){this.availableHosts.splice(this.availableHosts.indexOf(e),1),this.$store.commit("setAvailableHosts",this.availableHosts)},handleMachinesTagClose(e){this.melody_etcd.machines.splice(this.melody_etcd.machines.indexOf(e),1)}},watch:{etcdEnable:{handler:function(e){e?this.$store.commit("setExtraConfig",{name:"melody_etcd",config:this.melody_etcd}):this.$store.commit("removeExtraConfig",{name:"melody_etcd"})}},consulEnable:{handler:function(e){e?this.$store.commit("setExtraConfig",{name:"melody_consul",config:this.melody_consul}):this.$store.commit("removeExtraConfig",{name:"melody_consul"})}},bfEnable:{handler:function(e){e?this.$store.commit("setExtraConfig",{name:"melody_bloomfilter",config:this.melody_bloomfilter}):this.$store.commit("removeExtraConfig",{name:"melody_bloomfilter"})}},melody_etcd:{handler:function(){this.etcdEnable&&(this.$refs.config.validate(),this.$store.commit("setExtraConfig",{name:"melody_etcd",config:this.melody_etcd}))},deep:!0},melody_consul:{handler:function(){this.consulEnable&&this.$store.commit("setExtraConfig",{name:"melody_consul",config:this.melody_consul})},deep:!0},melody_bloomfilter:{handler:function(){this.bfEnable&&this.$store.commit("setExtraConfig",{name:"melody_bloomfilter",config:this.melody_bloomfilter})},deep:!0}}},n=c,d=l("2877"),m=Object(d["a"])(n,a,o,!1,null,"b789b870",null);t["default"]=m.exports}}]);
//# sourceMappingURL=chunk-6e1787a6.5d70acff.js.map