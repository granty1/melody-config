(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c15e347a"],{"064b":function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-collapse-item",{attrs:{disabled:e.disabled,name:e.p+"-"+e.title}},[i("template",{slot:"title"},[i("div",{staticStyle:{width:"100%","font-size":"16px"},on:{click:e.modify}},[e._v(" "+e._s(e.title)+" ")])]),e._t("default")],2)],1)},a=[],l=i("4360");function r(e){l["a"].commit("modifyActiveCards",e)}var s={data(){return{p:""===this.prefix?this.$route.name:this.prefix}},props:{title:{type:String,default:""},disabled:{type:Boolean,default:!1},remember:{type:Boolean,default:!0},prefix:{type:String,default:""}},methods:{modify(){this.remember&&(""===this.prefix?r(this.$route.name+"-"+this.title):r(this.prefix+"-"+this.title))}}},o=s,c=(i("37b0"),i("2877")),d=Object(c["a"])(o,n,a,!1,null,"74180b3e",null);t["a"]=d.exports},"09a0":function(e,t,i){"use strict";var n=i("13dc"),a=i.n(n);a.a},"13dc":function(e,t,i){},"37b0":function(e,t,i){"use strict";var n=i("5f02"),a=i.n(n);a.a},5590:function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("p",{class:{myhidden:!e.isEndpointsNone}},[e._v("还没有endpoint哦！")]),i("el-form",{class:{myhidden:e.isEndpointsNone}},[i("melody-card",[i("melody-card-item",{attrs:{title:"Endpoint Config"}},[i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:16}},[i("el-form-item",{attrs:{label:"端点地址(name)"}},[i("el-input",{attrs:{placeholder:"输入后端地址","suffix-icon":"el-icon-edit"},model:{value:e.curendpoint.endpoint,callback:function(t){e.$set(e.curendpoint,"endpoint",t)},expression:"curendpoint.endpoint"}}),i("div",{staticClass:"fs12"},[e._v(" 这是您的客户端将连接到的URI。必须以斜线开头。同时你也可以使用{parameters}的形式传递参数。 ")])],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{staticStyle:{float:"left",width:"47%"},attrs:{label:"请求的方法(Method)"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.curendpoint.method,callback:function(t){e.$set(e.curendpoint,"method",t)},expression:"curendpoint.method"}},e._l(e.methods,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1),i("div",{staticClass:"fs12"},[e._v(" HTTP请求方法 ")])],1),i("el-form-item",{staticStyle:{float:"left","margin-left":"20px",width:"47%"},attrs:{label:"输出格式(Output)"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:e.curendpoint.output_encoding,callback:function(t){e.$set(e.curendpoint,"output_encoding",t)},expression:"curendpoint.output_encoding"}},e._l(e.outputs,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1),i("div",{staticClass:"fs12"},[e._v(" 请求数据的编码格式 ")])],1)],1)],1),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"允许的请求查询参数 (?param=value)"}},[i("el-input",{attrs:{clearable:"",placeholder:"parameter_name"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addParameterHandle(t)}},model:{value:e.endCfg.curParameter,callback:function(t){e.$set(e.endCfg,"curParameter",t)},expression:"endCfg.curParameter"}},[i("el-button",{attrs:{slot:"append",type:"primary"},on:{click:e.addParameterHandle},slot:"append"},[e._v("Add parameter")])],1),e.curendpoint.querystring_params?i("div",[e._l(e.curendpoint.querystring_params,(function(t,n){return[i("el-tag",{key:n,style:0==n?{}:{"margin-left":"10px"},attrs:{type:"info",closable:"","disable-transitions":!1},on:{close:function(t){return e.removeParameterHandle(n)}}},[e._v(e._s(t))])]}))],2):e._e(),i("div",{staticStyle:{"font-size":"12px"}},[i("p",[e._v("查询要传递到后端的字符串参数。只写参数的名称，没有问号或相等的符号。")])])],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"允许通过的请求头(Headers)"}},[i("el-input",{attrs:{clearable:"",placeholder:"header_name"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addHeaderHandle(t)}},model:{value:e.endCfg.curHeader,callback:function(t){e.$set(e.endCfg,"curHeader",t)},expression:"endCfg.curHeader"}},[i("el-button",{attrs:{slot:"append",type:"primary"},on:{click:e.addHeaderHandle},slot:"append"},[e._v("Add Header")])],1),e.curendpoint.headers_to_pass?i("div",[e._l(e.curendpoint.headers_to_pass,(function(t,n){return[i("el-tag",{key:n,style:0==n?{}:{"margin-left":"10px"},attrs:{type:"info",closable:"","disable-transitions":!1},on:{close:function(t){return e.removeHeaderHandle(n)}}},[e._v(e._s(t))])]}))],2):e._e(),i("div",{staticStyle:{"font-size":"12px"}},[e._v(" 允许头文件从客户端传递到每个后端。这些标头不是附加的，而是设置后的替换。只有在需要自定义标头返回时才使用，但要确保声明所有需要的标头(包括Content-Type)。 ")])],1)],1)],1),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"并发数(concurrent_calls)"}},[i("el-input",{attrs:{placeholder:"输入并发数","suffix-icon":"el-icon-edit"},model:{value:e.curendpoint.concurrent_calls,callback:function(t){e.$set(e.curendpoint,"concurrent_calls",t)},expression:"curendpoint.concurrent_calls"}}),i("div",{staticClass:"fs12"},[e._v(" 要发送到后端以处理相同请求的并行请求。最快的请求被接受，其余的被丢弃。这个值应该在1和3之间(如果后端能够支持非常高的负载，则更高) ")])],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"自定义组合器(combiner)"}},[i("el-input",{attrs:{placeholder:"combiner name","suffix-icon":"el-icon-edit"},model:{value:e.curendpoint["extra_config"]["melody_proxy"]["combiner"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_proxy"],"combiner",t)},expression:"curendpoint['extra_config']['melody_proxy']['combiner']"}}),i("div",{staticClass:"fs12"},[e._v(" 如果您有一个自定义组合器，请在这里配置它，以便使用您的自定义配置修改代理管道(指定合并后端响应的组合器。) ")])],1)],1)],1)],1),i("melody-card-item",{attrs:{title:"Timeout and Cache TTL"}},[i("div",{staticClass:"fs12"},[e._v(" 下面的所有设置都是在服务配置中定义的，在这里设置一个或多个值意味着仅覆盖此特定端点的设置。 "),i("br"),e._v("有效时间单位为: ns, us, (or µs), ms, s, m, h E.g: 1s ")]),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"时延(timeout)"}},[i("el-input",{attrs:{placeholder:"timeout","suffix-icon":"el-icon-edit"},model:{value:e.curendpoint.timeout,callback:function(t){e.$set(e.curendpoint,"timeout",t)},expression:"curendpoint.timeout"}}),i("div",{staticClass:"fs12"},[e._v(" 等待最慢响应的时间最长。通常以毫秒为单位。 ")])],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"缓存时间(cache_ttl)"}},[i("el-input",{attrs:{placeholder:"cache_ttl","suffix-icon":"el-icon-edit"},model:{value:e.curendpoint.cache_ttl,callback:function(t){e.$set(e.curendpoint,"cache_ttl",t)},expression:"curendpoint.cache_ttl"}}),i("div",{staticClass:"fs12"},[e._v(" 代理可以将请求缓存到此端点的时间。 ")])],1)],1)],1)],1),i("melody-card-item",{attrs:{title:"Early Warning"}},[i("div",{staticClass:"fs12"},[e._v(" 下面的所有设置都是在服务配置中定义的，在这里设置一个或多个值意味着仅覆盖此特定端点的设置。 "),i("br"),e._v("有效时间单位为: ns, us, (or µs), ms, s, m, h E.g: 1s ")]),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"时间(time)"}},[i("el-input",{attrs:{placeholder:"time","suffix-icon":"el-icon-edit"},model:{value:e.curendpoint["extra_config"]["melody_alert"]["time"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_alert"],"time",t)},expression:"curendpoint['extra_config']['melody_alert']['time']"}}),i("div",{staticClass:"fs12"})],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"size(大小)"}},[i("el-input",{attrs:{placeholder:"size","suffix-icon":"el-icon-edit"},model:{value:e.curendpoint["extra_config"]["melody_alert"]["size"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_alert"],"size",t)},expression:"curendpoint['extra_config']['melody_alert']['size']"}}),i("div",{staticClass:"fs12"})],1)],1)],1)],1),i("melody-card-item",{attrs:{title:"Rate limit"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"请求次数限制"}},[i("br"),i("el-switch",{on:{change:e.switchRateLimit},model:{value:e.enableRateLimit,callback:function(t){e.enableRateLimit=t},expression:"enableRateLimit"}}),i("span",{staticStyle:{"margin-left":"20px"}},[e._v("Enable rate limiting for "+e._s(e.curendpoint.endpoint))]),i("p",[e._v("限制此端点可以接收的请求数量。")]),e.enableRateLimit?[i("el-row",[i("el-form-item",{attrs:{label:"每秒最大请求数(Rate limit)"}},[i("el-input",{attrs:{placeholder:"0","suffix-icon":"el-icon-edit"},model:{value:e.curendpoint["extra_config"]["melody_ratelimit_router"]["maxRate"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_ratelimit_router"],"maxRate",t)},expression:"curendpoint['extra_config']['melody_ratelimit_router']['maxRate']"}}),i("div",{staticClass:"fs12"},[e._v(" 要让此端点处理的每秒最大请求。每秒最大请求为0时速率限制器不起作用 ")])],1)],1),i("el-row",[i("el-col",{attrs:{span:12}},[i("el-switch",{model:{value:e.enableClientRateLimit,callback:function(t){e.enableClientRateLimit=t},expression:"enableClientRateLimit"}}),i("span",{staticStyle:{"margin-left":"20px"}},[e._v("Enable client rate limiting")]),e.enableClientRateLimit?[i("el-row",[i("el-form-item",{attrs:{label:"设置不同客户端的每秒最大请求数(Client Rate limit)"}},[i("el-input",{attrs:{placeholder:"0","suffix-icon":"el-icon-edit"},model:{value:e.curendpoint["extra_config"]["melody_ratelimit_router"]["clientMaxRate"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_ratelimit_router"],"clientMaxRate",t)},expression:"\n                              curendpoint['extra_config']['melody_ratelimit_router'][\n                                'clientMaxRate'\n                              ]\n                            "}}),i("div",{staticClass:"fs12"},[e._v(" 您希望允许每个不同API用户每秒的最大请求数。该值将作为所有端点的默认值使用，除非在每个端点中覆盖该值,使用0没有限制。 ")])],1),i("el-radio",{attrs:{label:"ip"},on:{change:e.setStrategyKey},model:{value:e.curendpoint["extra_config"]["melody_ratelimit_router"]["strategy"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_ratelimit_router"],"strategy",t)},expression:"\n                            curendpoint['extra_config']['melody_ratelimit_router']['strategy']\n                          "}},[e._v("根据IP识别客户端")]),i("br"),i("el-radio",{attrs:{label:"header"},on:{change:e.setStrategyKey},model:{value:e.curendpoint["extra_config"]["melody_ratelimit_router"]["strategy"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_ratelimit_router"],"strategy",t)},expression:"\n                            curendpoint['extra_config']['melody_ratelimit_router']['strategy']\n                          "}},[e._v("根据Header识别客户端")]),e.curendpoint["extra_config"]["melody_ratelimit_router"]["strategy"]&&"header"===e.curendpoint["extra_config"]["melody_ratelimit_router"]["strategy"]?[i("el-input",{attrs:{placeholder:"key","suffix-icon":"el-icon-edit"},model:{value:e.curendpoint["extra_config"]["melody_ratelimit_router"]["key"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_ratelimit_router"],"key",t)},expression:"\n                              curendpoint['extra_config']['melody_ratelimit_router']['key']\n                            "}})]:e._e()],2)]:e._e()],2)],1)]:e._e()],2)],1)],1)],1),i("melody-card-item",{attrs:{title:"JWT validation"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"JWT validation"}},[i("br"),i("el-switch",{on:{change:e.switchJWTvalidation},model:{value:e.enableJWTvalidation,callback:function(t){e.enableJWTvalidation=t},expression:"enableJWTvalidation"}}),i("span",{staticStyle:{"margin-left":"20px"}},[e._v("Enable JWT validation for "+e._s(e.curendpoint.endpoint))])],1)],1)],1),e.enableJWTvalidation?[i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"JWK地址(JWK URI)"}},[i("el-input",{attrs:{"suffix-icon":"el-icon-edit"},model:{value:e.curendpoint["extra_config"]["melody_jose_validator"]["jwk-url"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_jose_validator"],"jwk-url",t)},expression:"curendpoint['extra_config']['melody_jose_validator']['jwk-url']"}}),i("div",{staticClass:"fs12"},[e._v(" 指向JWK端点的URL，其中包含一组用于验证JWT的真实性的公钥。 ")])],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"算法(Algorithm)"}},[i("el-select",{staticStyle:{width:"100%"},model:{value:e.curendpoint["extra_config"]["melody_jose_validator"]["alg"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_jose_validator"],"alg",t)},expression:"curendpoint['extra_config']['melody_jose_validator']['alg']"}},e._l(e.alg,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1),i("div",{staticClass:"fs12"},[e._v(" 数字签名和MACs算法 ")])],1)],1)],1),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"Issuer"}},[i("el-input",{attrs:{"suffix-icon":"el-icon-edit"},model:{value:e.curendpoint["extra_config"]["melody_jose_validator"]["issuer"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_jose_validator"],"issuer",t)},expression:"curendpoint['extra_config']['melody_jose_validator']['issuer']"}}),i("div",{staticClass:"fs12"},[e._v(" 预期的发行人 ")])],1)],1)],1),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"受众(Audience)"}},[i("el-input",{attrs:{clearable:"",placeholder:"http://api.example.com"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addAudienceHandle(t)}},model:{value:e.endCfg.audience,callback:function(t){e.$set(e.endCfg,"audience",t)},expression:"endCfg.audience"}},[i("el-button",{attrs:{slot:"append",type:"primary"},on:{click:e.addAudienceHandle},slot:"append"},[e._v("Add")])],1),e.curendpoint["extra_config"]["melody_jose_validator"]["audience"]?i("div",[e._l(e.curendpoint["extra_config"]["melody_jose_validator"]["audience"],(function(t,n){return[i("el-tag",{key:n,style:0==n?{}:{"margin-left":"10px"},attrs:{type:"info",closable:"","disable-transitions":!1},on:{close:function(t){return e.removeAudienceHandle(n)}}},[e._v(e._s(t))])]}))],2):e._e(),i("div",{staticClass:"fs12"},[i("p",[e._v("此端点支持的所有受众的列表")])])],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"角色(Roles)"}},[i("el-input",{attrs:{clearable:"",placeholder:"admin"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addRolesHandle(t)}},model:{value:e.endCfg.Roles,callback:function(t){e.$set(e.endCfg,"Roles",t)},expression:"endCfg.Roles"}},[i("el-button",{attrs:{slot:"append",type:"primary"},on:{click:e.addRolesHandle},slot:"append"},[e._v("Add")])],1),e.curendpoint["extra_config"]["melody_jose_validator"]["roles"]?i("div",[e._l(e.curendpoint["extra_config"]["melody_jose_validator"]["roles"],(function(t,n){return[i("el-tag",{key:n,style:0==n?{}:{"margin-left":"10px"},attrs:{type:"info",closable:"","disable-transitions":!1},on:{close:function(t){return e.removeRolesHandle(n)}}},[e._v(e._s(t))])]}))],2):e._e(),i("div",{staticClass:"fs12"},[e._v(" 允许访问此端点的所有角色的列表。 ")])],1)],1)],1),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"Roles Key"}},[i("el-input",{attrs:{"suffix-icon":"el-icon-edit"},model:{value:e.curendpoint["extra_config"]["melody_jose_validator"]["roles_key"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_jose_validator"],"roles_key",t)},expression:"curendpoint['extra_config']['melody_jose_validator']['roles_key']"}}),i("div",{staticClass:"fs12"},[e._v(" 存储角色的密钥名。 ")])],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"Cookie name"}},[i("el-input",{attrs:{"suffix-icon":"el-icon-edit"},model:{value:e.curendpoint["extra_config"]["melody_jose_validator"]["cookie_key"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_jose_validator"],"cookie_key",t)},expression:"curendpoint['extra_config']['melody_jose_validator']['cookie_key']"}}),i("div",{staticClass:"fs12"},[e._v(" cookie的密钥名。 ")])],1)],1)],1),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"指纹(jwk_fingerprints)"}},[i("el-input",{attrs:{clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addFingerprintHandle(t)}},model:{value:e.endCfg.fingerprint,callback:function(t){e.$set(e.endCfg,"fingerprint",t)},expression:"endCfg.fingerprint"}},[i("el-button",{attrs:{slot:"append",type:"primary"},on:{click:e.addFingerprintHandle},slot:"append"},[e._v("Add")])],1),e.curendpoint["extra_config"]["melody_jose_validator"]["jwk_fingerprints"]?i("div",[e._l(e.curendpoint["extra_config"]["melody_jose_validator"]["jwk_fingerprints"],(function(t,n){return[i("el-tag",{key:n,style:0==n?{}:{"margin-left":"10px"},attrs:{type:"info",closable:"","disable-transitions":!1},on:{click:function(t){return e.removeFingerprintHandle(n)}}},[e._v(e._s(t))])]}))],2):e._e(),i("div",{staticClass:"fs12"},[i("p",[e._v("所有的指纹必须在base64中。")])])],1)],1)],1),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"自定义密码套件(Custom Cipher Suites)"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:e.curendpoint["extra_config"]["melody_jose_validator"]["cipher_suites"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_jose_validator"],"cipher_suites",t)},expression:"curendpoint['extra_config']['melody_jose_validator']['cipher_suites']"}},e._l(e.cipher,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),i("div",{staticClass:"fs12"},[e._v(" 将会覆盖默认密码套件。 ")])],1)],1)],1),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:""}},[i("el-checkbox",{model:{value:e.curendpoint["extra_config"]["melody_jose_validator"]["cache"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_jose_validator"],"cache",t)},expression:"curendpoint['extra_config']['melody_jose_validator']['cache']"}},[e._v("Enable caching")]),i("div",{staticClass:"fs12"},[e._v(" 如果将此值设置为true，那么经过验证的令牌将存储在内存中，以便进行重复验证。 ")])],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:""}},[i("el-checkbox",{model:{value:e.curendpoint["extra_config"]["melody_jose_validator"]["disable_jwk_security"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_jose_validator"],"disable_jwk_security",t)},expression:"\n                    curendpoint['extra_config']['melody_jose_validator']['disable_jwk_security']\n                  "}},[e._v("Disable JWK security")]),i("div",{staticClass:"fs12"},[e._v(" 当您使用不安全的连接时(纯http)。 ")])],1)],1)],1)]:e._e()],2),i("melody-card-item",{attrs:{title:"JWT signing"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"JWT signing"}},[i("br"),i("el-switch",{on:{change:e.switchJWTsigning},model:{value:e.enableJWTsigning,callback:function(t){e.enableJWTsigning=t},expression:"enableJWTsigning"}}),i("span",{staticStyle:{"margin-left":"20px"}},[e._v("Enable JWT signing for "+e._s(e.curendpoint.endpoint))])],1)],1)],1),e.enableJWTsigning?[i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"JWK地址(JWK URI)"}},[i("el-input",{attrs:{"suffix-icon":"el-icon-edit"},model:{value:e.curendpoint["extra_config"]["melody_jose_signer"]["jwk-url"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_jose_signer"],"jwk-url",t)},expression:"curendpoint['extra_config']['melody_jose_signer']['jwk-url']"}}),i("div",{staticClass:"fs12"},[e._v(" 指向JWK端点的URL，其中包含一组用于签名令牌的私钥。 ")])],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"算法(Algorithm)"}},[i("el-select",{staticStyle:{width:"100%"},model:{value:e.curendpoint["extra_config"]["melody_jose_signer"]["alg"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_jose_signer"],"alg",t)},expression:"curendpoint['extra_config']['melody_jose_signer']['alg']"}},e._l(e.alg,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1),i("div",{staticClass:"fs12"},[e._v(" 数字签名和MACs算法 ")])],1)],1)],1),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"标志键(keys-to-sign)"}},[i("el-input",{attrs:{clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addKeysHandle(t)}},model:{value:e.endCfg.keys,callback:function(t){e.$set(e.endCfg,"keys",t)},expression:"endCfg.keys"}},[i("el-button",{attrs:{slot:"append",type:"primary"},on:{click:e.addKeysHandle},slot:"append"},[e._v("Add")])],1),e.curendpoint["extra_config"]["melody_jose_signer"]["keys-to-sign"]?i("div",[e._l(e.curendpoint["extra_config"]["melody_jose_signer"]["keys-to-sign"],(function(t,n){return[i("el-tag",{key:n,style:0==n?{}:{"margin-left":"10px"},attrs:{type:"info",closable:"","disable-transitions":!1},on:{close:function(t){return e.removeKeysHandle(n)}}},[e._v(e._s(t))])]}))],2):e._e(),i("div",{staticClass:"fs12"},[i("p",[e._v("需要签名的特定密钥列表。")])])],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"密匙标识(Key ID)"}},[i("el-input",{attrs:{"suffix-icon":"el-icon-edit"},model:{value:e.curendpoint["extra_config"]["melody_jose_signer"]["kid"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_jose_signer"],"kid",t)},expression:"curendpoint['extra_config']['melody_jose_signer']['kid']"}})],1)],1)],1),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"指纹(jwk_fingerprints)"}},[i("el-input",{attrs:{clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addFingerprintHandle(t)}},model:{value:e.endCfg.fingerprint,callback:function(t){e.$set(e.endCfg,"fingerprint",t)},expression:"endCfg.fingerprint"}},[i("el-button",{attrs:{slot:"append",type:"primary"},on:{click:e.addFingerprintHandle},slot:"append"},[e._v("Add")])],1),e.curendpoint["extra_config"]["melody_jose_signer"]["jwk_fingerprints"]?i("div",[e._l(e.curendpoint["extra_config"]["melody_jose_signer"]["jwk_fingerprints"],(function(t,n){return[i("el-tag",{key:n,style:0==n?{}:{"margin-left":"10px"},attrs:{type:"info",closable:"","disable-transitions":!1},on:{click:function(t){return e.removeFingerprintHandle(n)}}},[e._v(e._s(t))])]}))],2):e._e(),i("div",{staticClass:"fs12"},[i("p",[e._v("所有的指纹必须在base64中。")])])],1)],1)],1),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"自定义密码套件(Custom Cipher Suites)"}},[i("el-select",{staticStyle:{width:"100%"},attrs:{multiple:""},model:{value:e.curendpoint["extra_config"]["melody_jose_signer"]["cipher_suites"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_jose_signer"],"cipher_suites",t)},expression:"curendpoint['extra_config']['melody_jose_signer']['cipher_suites']"}},e._l(e.cipher,(function(e){return i("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1),i("div",{staticClass:"fs12"},[e._v(" 将会覆盖默认密码套件。 ")])],1)],1)],1),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:""}},[i("el-checkbox",{model:{value:e.curendpoint["extra_config"]["melody_jose_signer"]["full"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_jose_signer"],"full",t)},expression:"curendpoint['extra_config']['melody_jose_signer']['full']"}},[e._v("完整的序列化(Full serialization)")]),i("div",{staticClass:"fs12"},[e._v(" 使用JSON格式而不是JWT给出的紧凑格式。 ")])],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:""}},[i("el-checkbox",{model:{value:e.curendpoint["extra_config"]["melody_jose_signer"]["disable_jwk_security"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_jose_signer"],"disable_jwk_security",t)},expression:"\n                    curendpoint['extra_config']['melody_jose_signer']['disable_jwk_security']\n                  "}},[e._v("Disable JWK security")]),i("div",{staticClass:"fs12"},[e._v(" 当您使用不安全的连接时(纯http)。 ")])],1)],1)],1)]:e._e()],2),i("melody-card-item",{attrs:{title:"Backend API calls"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"后端API调用"}},[i("br"),i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:e.switchSequential},model:{value:e.curendpoint["extra_config"]["melody_proxy"]["sequential"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_proxy"],"sequential",t)},expression:"curendpoint['extra_config']['melody_proxy']['sequential']"}}),i("span",{staticStyle:{"margin-left":"20px"}},[e._v("启用顺序代理(sequential proxy)")]),i("div",{staticClass:"fs12"},[e._v(" 当启用顺序代理时，后端调用可以使用前一次调用的数据。以前调用的数据在{resp0_XXXX}这样的变量中可用，其中0是后端索引，XXXX是属性。E。g: {resp1_hotel_id}从第二个后端调用中获取字段hotel_id(索引从0开始)。将此变量注入所需的后端端点。 ")])],1)],1)],1)],1)],1),i("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:e.addBackendHandle}},[e._v("add backend response")]),i("el-button",{attrs:{type:"info",icon:"el-icon-plus",disabled:e.enableStaticRes},on:{click:e.addStaticHandle}},[e._v("add static response")]),e.enableStaticRes?[i("el-card",{staticStyle:{"margin-top":"20px"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",[e._v("Static Response(存根数据)")]),i("i",{staticClass:"el-icon-close",staticStyle:{float:"right",padding:"3px 4px","margin-left":"10px",cursor:"pointer"},on:{click:function(t){return e.delStaticRes()}}}),i("i",{staticClass:"el-icon-minus",staticStyle:{float:"right",padding:"3px 4px","margin-left":"10px",cursor:"pointer"},on:{click:function(t){return e.smallStaticRes()}}})]),i("div",{attrs:{id:"staticResID"}},[i("el-row",[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"静态响应"}},[i("br"),i("p",[e._v(" 当后端失败时，您仍然可以将下面提供的静态数据返回给用户。数据与任何现有的部分响应合并。如果您仍然没有后端，并且希望拥有这些数据，请添加一个无法解析的伪数据。 ")]),i("el-row",{staticStyle:{"margin-top":"20px"}},[i("el-col",{attrs:{span:4}},[i("el-form-item",{attrs:{label:"响应方式(Strategy)"}},[i("el-select",{attrs:{placeholder:"请选择"},on:{change:function(t){return e.changeStrategy()}},model:{value:e.curendpoint["extra_config"]["melody_proxy"]["static"]["strategy"],callback:function(t){e.$set(e.curendpoint["extra_config"]["melody_proxy"]["static"],"strategy",t)},expression:"\n                          curendpoint['extra_config']['melody_proxy']['static']['strategy']\n                        "}},e._l(e.StaticResponseS,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1),i("el-row",{staticStyle:{"margin-top":"20px"},attrs:{gutter:20}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"响应内容(data)"}},[i("el-input",{attrs:{type:"textarea",autosize:{minRows:5,maxRows:10},rows:2,placeholder:"请输入内容"},on:{input:function(t){return e.changeResdata()}},model:{value:e.resdata,callback:function(t){e.resdata=t},expression:"resdata"}}),i("div",{staticClass:"fs12",attrs:{id:"resStaticTip"}})],1)],1)],1)],1)],1)],1)],1)])]:e._e(),e.curendpoint.backends?i("div",{staticStyle:{"margin-top":"20px"}},[e._l(e.curendpoint.backends,(function(t,n){return[i("el-card",{key:n,staticStyle:{"margin-top":"20px"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("span",{on:{click:function(t){return e.smallBackend(n)}}},[e._v(e._s(t.url_pattern))]),i("i",{staticClass:"el-icon-close",staticStyle:{float:"right",padding:"3px 4px","margin-left":"10px",cursor:"pointer"},on:{click:function(t){return e.delBackend(n)}}}),i("i",{staticClass:"el-icon-minus",staticStyle:{float:"right",padding:"3px 4px","margin-left":"10px",cursor:"pointer"},on:{click:function(t){return e.smallBackend(n)}}})]),i("div",{staticClass:"myhidden",attrs:{"data-acback":n}},[e.hostResolution.length>=1?[i("el-row",[i("el-form-item",{attrs:{label:"主机类型选择(Host resolution)"}},[i("br"),e._l(e.hostResolution,(function(n,a){return i("el-radio",{key:a,attrs:{label:n},on:{change:function(i){return e.setSD(t)}},model:{value:t.sd,callback:function(i){e.$set(t,"sd",i)},expression:"backend.sd"}},[e._v(e._s(n))])})),i("div",{staticClass:"fs12"},[e._v("已配置的服务发现选项。")])],2)],1),i("el-row",[i("el-form-item",{attrs:{label:"可选的主机(availableHosts)"}},[i("br"),[i("el-checkbox-group",{model:{value:t.host,callback:function(i){e.$set(t,"host",i)},expression:"backend.host"}},e._l(e.availableHosts[t.sd],(function(e,t){return i("el-checkbox",{key:t,attrs:{label:e}})})),1)],i("div",{staticClass:"fs12"},[e._v("所有的后端可以用来满足这个请求，平衡使用轮询。")])],2)],1),i("el-row",[i("el-form-item",{attrs:{label:"禁用主机消毒处理(Disable host sanitization)"}},[i("br"),i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},model:{value:t.disable_host_sanitize,callback:function(i){e.$set(t,"disable_host_sanitize",i)},expression:"backend.disable_host_sanitize"}}),i("span",{staticStyle:{"margin-left":"20px"}},[e._v("启用主机名消毒处理")]),i("div",{staticClass:"fs12"},[e._v("检查地址何时不需要验证协议。如果不确定，则保留建议的值。")])],1)],1)]:[i("div",{staticClass:"fs12",staticStyle:{color:"red"}},[e._v(" 重要！！！"),i("router-link",{attrs:{to:{name:"service"}}},[e._v("请前往添加Host")])],1),i("br")],i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:16}},[i("el-form-item",{attrs:{label:"后端地址(Backend endpoint)"}},[i("el-input",{attrs:{placeholder:"输入地址","suffix-icon":"el-icon-edit"},model:{value:t.url_pattern,callback:function(i){e.$set(t,"url_pattern",i)},expression:"backend.url_pattern"}}),i("div",{staticClass:"fs12"},[e._v(" 这是您要查询的后端服务器的端点。必须以斜线开头。同时你也可以使用{parameters}的形式传递参数。 ")])],1)],1),i("el-col",{attrs:{span:8}},[i("el-form-item",{staticStyle:{float:"left",width:"47%"},attrs:{label:"请求方法(HTTP Verb)"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.method,callback:function(i){e.$set(t,"method",i)},expression:"backend.method"}},e._l(e.methods,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1),i("div",{staticClass:"fs12"},[e._v(" HTTP请求方法 ")])],1),i("el-form-item",{staticStyle:{float:"left","margin-left":"20px",width:"47%"},attrs:{label:"编码(encoding)"}},[i("el-select",{attrs:{placeholder:"请选择"},model:{value:t.encoding,callback:function(i){e.$set(t,"encoding",i)},expression:"backend.encoding"}},e._l(e.encoding,(function(e){return i("el-option",{key:e,attrs:{label:e,value:e}})})),1),i("div",{staticClass:"fs12"},[e._v(" 请求数据的编码格式 ")])],1)],1)],1),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"黑名单"}},[i("el-input",{attrs:{clearable:"",placeholder:"Blacklist"},nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.addBackendBlacklist(t)}},model:{value:e.black,callback:function(t){e.black=t},expression:"black"}},[i("el-button",{attrs:{slot:"append",type:"primary"},on:{click:function(i){return e.addBackendBlacklist(t)}},slot:"append"},[e._v("Add Blacklist")])],1),t.blacklist?i("div",[e._l(t.blacklist,(function(n,a){return[i("el-tag",{key:a,style:0==a?{}:{"margin-left":"10px"},attrs:{type:"info",closable:"","disable-transitions":!1},on:{close:function(i){return e.removeBackendBlacklist(t,a)}}},[e._v(e._s(n))])]}))],2):e._e(),i("div",{staticStyle:{"font-size":"12px"}},[i("p",[e._v("您不会从响应中选择的属性。")])])],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"白名单"}},[i("el-input",{attrs:{clearable:"",placeholder:"Whitelist"},nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.addBackendWhitelist(t)}},model:{value:e.white,callback:function(t){e.white=t},expression:"white"}},[i("el-button",{attrs:{slot:"append",type:"primary"},on:{click:function(i){return e.addBackendWhitelist(t)}},slot:"append"},[e._v("Add whitelist")])],1),t.whitelist?i("div",[e._l(t.whitelist,(function(n,a){return[i("el-tag",{key:a,style:0==a?{}:{"margin-left":"10px"},attrs:{type:"info",closable:"","disable-transitions":!1},on:{close:function(i){return e.removeBackendWhitelist(t,a)}}},[e._v(e._s(n))])]}))],2):e._e(),i("div",{staticStyle:{"font-size":"12px"}},[e._v(" 您将从响应中选择的属性。 ")])],1)],1)],1),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"分组(Capturing group)"}},[i("el-input",{attrs:{placeholder:"my-group","suffix-icon":"el-icon-edit"},model:{value:t.group,callback:function(i){e.$set(t,"group",i)},expression:"backend.group"}}),i("div",{staticClass:"fs12"},[e._v(" 只有在希望捕获所有响应并将其封装在属性名中时才填充。 ")])],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"根对象名(target)"}},[i("el-input",{attrs:{placeholder:"target","suffix-icon":"el-icon-edit",disabled:t.is_collection},model:{value:t.target,callback:function(i){e.$set(t,"target",i)},expression:"backend.target"}}),i("div",{staticClass:"fs12"},[e._v(" 一些api返回封装在根对象(通常命名为data、response、items)中的所有内容。在这里指定一个根对象将把它的所有子对象放在第一层。在操作数据时，只有其子数据是可见的。 ")])],1)],1)],1),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"错误处理(Melody_http)"}},[i("el-input",{attrs:{placeholder:"backend name","suffix-icon":"el-icon-edit"},model:{value:t["extra_config"]["melody_http"]["return_error_details"],callback:function(i){e.$set(t["extra_config"]["melody_http"],"return_error_details",i)},expression:"backend['extra_config']['melody_http']['return_error_details']"}}),i("div",{staticClass:"fs12"},[e._v(" 如果当前接口挂掉，将返回具体错误的原因。 ")])],1)],1)],1),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"最大请求数(Max rate limit)"}},[i("el-input",{attrs:{placeholder:"Max rate limit","suffix-icon":"el-icon-edit"},model:{value:t["extra_config"]["melody_ratelimit_proxy"]["maxRate"],callback:function(i){e.$set(t["extra_config"]["melody_ratelimit_proxy"],"maxRate",i)},expression:"backend['extra_config']['melody_ratelimit_proxy']['maxRate']"}}),i("div",{staticClass:"fs12"},[e._v(" 后端希望接收的每秒最大请求数。 ")])],1)],1),i("el-col",{attrs:{span:12}},[i("el-form-item",{attrs:{label:"桶容量(Capacity)"}},[i("el-input",{attrs:{placeholder:"Capacity","suffix-icon":"el-icon-edit"},model:{value:t["extra_config"]["melody_ratelimit_proxy"]["capacity"],callback:function(i){e.$set(t["extra_config"]["melody_ratelimit_proxy"],"capacity",i)},expression:"backend['extra_config']['melody_ratelimit_proxy']['capacity']"}}),i("div",{staticClass:"fs12"},[e._v(" 推荐值= maxRate的值。 ")])],1)],1)],1),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:24}},[i("el-form-item",{attrs:{label:"无对象响应(Non-object response)"}},[i("br"),i("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949"},on:{change:function(i){return e.switchNonObject(t)}},model:{value:t.is_collection,callback:function(i){e.$set(t,"is_collection",i)},expression:"backend.is_collection"}}),i("span",{staticStyle:{"margin-left":"20px"}},[e._v("启用Non-object响应")]),i("div",{staticClass:"fs12"},[e._v(' 将响应视为一个集合，而不是对象。Melody期望返回的内容封装在一个对象中(在json中，e。g: {"status":"OK"}但是如果后端返回一个集合(e。g: ["a"， "b"])选中这个选项。集合将在集合属性中返回。使用下面的重命名将其重命名为任何其他名称。 ')])],1)],1)],1),i("p",{staticClass:"fs12"},[e._v("更改命名(Renaming)")]),i("el-row",{attrs:{gutter:24}},[i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:""}},[i("el-input",{attrs:{placeholder:"Original object","suffix-icon":"el-icon-edit"},model:{value:e.back.o,callback:function(t){e.$set(e.back,"o",t)},expression:"back.o"}}),i("div",{staticClass:"fs12"},[e._v(" Original object ")])],1)],1),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:""}},[i("el-input",{attrs:{placeholder:"Renamed object","suffix-icon":"el-icon-edit"},model:{value:e.back.r,callback:function(t){e.$set(e.back,"r",t)},expression:"back.r"}}),i("div",{staticClass:"fs12"},[e._v(" Renamed object ")])],1)],1),i("el-col",{attrs:{span:6}},[i("el-form-item",{attrs:{label:""}},[i("el-button",{attrs:{type:"primary"},on:{click:function(i){return e.addMapping(t)}},nativeOn:{keyup:function(i){return!i.type.indexOf("key")&&e._k(i.keyCode,"enter",13,i.key,"Enter")?null:e.addMapping(t)}}},[e._v("添加")])],1)],1)],1),t.mapping?i("div",[e._l(t.mapping,(function(n,a){return[i("el-tag",{key:a,style:0==a?{}:{"margin-left":"10px"},attrs:{type:"info",closable:"","disable-transitions":!1},on:{close:function(i){return e.removeMapping(t,a)}}},[e._v(e._s(a)+" -> "+e._s(n))])]}))],2):e._e()],2)])]}))],2):e._e()],2)],1)},a=[],l=i("9641"),r=i("064b"),s=i("ffad"),o={name:"endpoint",components:{MelodyCard:l["a"],MelodyCardItem:r["a"]},mounted:function(){this.setInit()},data(){let e=this.$store.getters.serviceConfig,t=this.$store.getters.availableHosts,i=[],n={};if(t&&void 0!==t)for(let a in t){let e=t[a].split(" - ")[0],l=t[a].split(" - ")[1];void 0===n[e]?(n[e]=[],n[e].push(l)):n[e].push(l),-1===i.indexOf(e)&&i.push(e)}return{config:e,endpoints:e.endpoints,curendpoint:e.endpoints[1*this.$route.params.url],isEndpointsNone:!1,methods:["GET","POST","PUT","DELETE"],outputs:["json","negotiate","string","no-op"],encoding:["json","xml","rss","string","no-op"],StaticResponseS:["Always","Success","Errored","Incomplete"],alg:["EdDSA","HS256","HS384","HS512","RS256","RS384","RS512","ES256","ES384","ES512","PS256","PS384","PS512"],cipher:[{value:"5",label:"TLS_RSA_WITH_RC4_128_SHA"},{value:"10",label:"TLS_RSA_WITH_3DES_EDE_CBC_SHA"},{value:"47",label:"TLS_RSA_WITH_AES_128_CBC_SHA"},{value:"53",label:"TLS_RSA_WITH_AES_256_CBC_SHA"},{value:"60",label:"TLS_RSA_WITH_AES_128_CBC_SHA256"},{value:"156",label:"TLS_RSA_WITH_AES_128_GCM_SHA256"},{value:"157",label:"TLS_RSA_WITH_AES_256_GCM_SHA384"},{value:"49159",label:"TLS_ECDHE_ECDSA_WITH_RC4_128_SHA"},{value:"49161",label:"TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA"},{value:"49162",label:"TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA"},{value:"49169",label:"TLS_ECDHE_RSA_WITH_RC4_128_SHA"},{value:"49170",label:"TLS_ECDHE_RSA_WITH_3DES_EDE_CBC_SHA"},{value:"49171",label:"TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA"},{value:"49172",label:"TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA"},{value:"49187",label:"TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256"},{value:"49191",label:"TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256"},{value:"49195",label:"TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256"},{value:"49196",label:"TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384"},{value:"49199",label:"TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256"},{value:"49200",label:"TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384"},{value:"52392",label:"TLS_ECDHE_RSA_WITH_CHACHA20_POLY1305"},{value:"52393",label:"TLS_ECDHE_ECDSA_WITH_CHACHA20_POLY1305"}],endCfg:{curParameter:"",curHeader:"",audience:"",fingerprint:""},resdata:"",textarea:"",enableRateLimit:!1,enableJWTvalidation:!1,enableJWTsigning:!1,enableClientRateLimit:!1,enableStaticResponse:!1,enableStaticRes:!1,hostResolution:i,availableHosts:n,checkHosts:[],black:"",white:"",back:{o:"",r:""}}},methods:{setInit(){this.curendpoint["extra_config"]["melody_ratelimit_router"]["strategy"]||this.curendpoint["extra_config"]["melody_ratelimit_router"]["clientMaxRate"]?this.enableClientRateLimit=!0:this.enableClientRateLimit=!1,this.curendpoint["extra_config"]["melody_ratelimit_router"]["maxRate"]||!0===this.enableClientRateLimit?this.enableRateLimit=!0:this.enableRateLimit=!1,this.curendpoint["extra_config"]["melody_jose_validator"]?0==Object.keys(this.curendpoint["extra_config"]["melody_jose_validator"]).length?this.enableJWTvalidation=!1:this.enableJWTvalidation=!0:this.enableJWTvalidation=!1,this.curendpoint["extra_config"]["melody_jose_signer"]?0==Object.keys(this.curendpoint["extra_config"]["melody_jose_signer"]).length?this.enableJWTsigning=!1:this.enableJWTsigning=!0:this.enableJWTsigning=!1,this.curendpoint["extra_config"]["melody_proxy"]["static"]?(this.enableStaticRes=!0,this.curendpoint["extra_config"]["melody_proxy"]["static"]["data"]&&(this.resdata=JSON.stringify(this.curendpoint["extra_config"]["melody_proxy"]["static"]["data"],null,5))):this.enableStaticRes=!1},smallBackend(e){let t=document.querySelectorAll("[data-acback]");t[e].classList.toggle("myhidden")},smallStaticRes(){let e=document.getElementById("staticResID");e.classList.toggle("myhidden"),console.log("ssss")},addParameterHandle(){void 0===this.curendpoint["querystring_params"]&&(this.curendpoint["querystring_params"]=[]),this.endCfg.curParameter&&-1==this.curendpoint["querystring_params"].indexOf(this.endCfg.curParameter)&&(this.curendpoint["querystring_params"].push(this.endCfg.curParameter),this.curendpoint=JSON.parse(JSON.stringify(this.curendpoint)),this.endCfg.curParameter="")},removeParameterHandle(e){this.curendpoint["querystring_params"].splice(e,1),this.curendpoint=JSON.parse(JSON.stringify(this.curendpoint))},addHeaderHandle(){void 0===this.curendpoint["headers_to_pass"]&&(this.curendpoint["headers_to_pass"]=[]),this.endCfg.curHeader&&-1==this.curendpoint["headers_to_pass"].indexOf(this.endCfg.curHeader)&&(this.curendpoint["headers_to_pass"].push(this.endCfg.curHeader),this.curendpoint=JSON.parse(JSON.stringify(this.curendpoint)))},removeHeaderHandle(e){this.curendpoint["headers_to_pass"].splice(e,1),this.curendpoint=JSON.parse(JSON.stringify(this.curendpoint))},addAudienceHandle(){void 0===this.curendpoint["extra_config"]["melody_jose_validator"]["audience"]&&(this.curendpoint["extra_config"]["melody_jose_validator"]["audience"]=[]),this.endCfg.audience&&-1===this.curendpoint["extra_config"]["melody_jose_validator"]["audience"].indexOf(this.endCfg.audience)&&(this.curendpoint["extra_config"]["melody_jose_validator"]["audience"].push(this.endCfg.audience),this.curendpoint=JSON.parse(JSON.stringify(this.curendpoint)))},removeAudienceHandle(e){this.curendpoint["extra_config"]["melody_jose_validator"]["audience"].splice(e,1),this.curendpoint=JSON.parse(JSON.stringify(this.curendpoint))},addRolesHandle(){void 0===this.curendpoint["extra_config"]["melody_jose_validator"]["roles"]&&(this.curendpoint["extra_config"]["melody_jose_validator"]["roles"]=[]),this.endCfg.Roles&&-1===this.curendpoint["extra_config"]["melody_jose_validator"]["roles"].indexOf(this.endCfg.Roles)&&(this.curendpoint["extra_config"]["melody_jose_validator"]["roles"].push(this.endCfg.Roles),this.curendpoint=JSON.parse(JSON.stringify(this.curendpoint)))},removeRolesHandle(e){this.curendpoint["extra_config"]["melody_jose_validator"]["roles"].splice(e,1),this.curendpoint=JSON.parse(JSON.stringify(this.curendpoint))},addKeysHandle(){void 0===this.curendpoint["extra_config"]["melody_jose_signer"]["keys-to-sign"]&&(this.curendpoint["extra_config"]["melody_jose_signer"]["keys-to-sign"]=[]),this.endCfg.keys&&-1===this.curendpoint["extra_config"]["melody_jose_signer"]["keys-to-sign"].indexOf(this.endCfg.keys)&&(this.curendpoint["extra_config"]["melody_jose_signer"]["keys-to-sign"].push(this.endCfg.keys),this.curendpoint=JSON.parse(JSON.stringify(this.curendpoint)))},removeKeysHandle(e){this.curendpoint["extra_config"]["melody_jose_signer"]["keys-to-sign"].splice(e,1),this.curendpoint=JSON.parse(JSON.stringify(this.curendpoint))},addFingerprintHandle(){void 0===this.curendpoint["extra_config"]["melody_jose_validator"]["jwk_fingerprints"]&&(this.curendpoint["extra_config"]["melody_jose_validator"]["jwk_fingerprints"]=[]),this.endCfg.fingerprint&&-1===this.curendpoint["extra_config"]["melody_jose_validator"]["jwk_fingerprints"].indexOf(this.endCfg.fingerprint)&&(this.curendpoint["extra_config"]["melody_jose_validator"]["jwk_fingerprints"].push(this.endCfg.fingerprint),this.curendpoint=JSON.parse(JSON.stringify(this.curendpoint)))},removeFingerprintHandle(e){this.curendpoint["extra_config"]["melody_jose_validator"]["jwk_fingerprints"].splice(e,1),this.curendpoint=JSON.parse(JSON.stringify(this.curendpoint))},addBackendHandle(){let e=new s["a"];this.curendpoint.backends.push(e)},addStaticHandle(){let e={strategy:"Incomplete",data:{new_field_a:12,new_field_b:["arr1","arr2"],new_field_c:{obj:"obj1"}}};this.resdata=JSON.stringify(e["data"],null,5),void 0===this.curendpoint["extra_config"]["melody_proxy"]&&(this.curendpoint["extra_config"]["melody_proxy"]={},this.curendpoint["extra_config"]["melody_proxy"]["static"]={}),void 0===this.curendpoint["extra_config"]["melody_proxy"]["static"]&&(this.curendpoint["extra_config"]["melody_proxy"]["static"]={}),this.curendpoint["extra_config"]["melody_proxy"]["static"]["strategy"]="Incomplete",this.curendpoint["extra_config"]["melody_proxy"]["static"]["data"]={new_field_a:12,new_field_b:["arr1","arr2"],new_field_c:{obj:"obj1"}},this.curendpoint=JSON.parse(JSON.stringify(this.curendpoint)),this.enableStaticRes=!0},clearCacheHandle(){this.endCfg.curParameter="",this.endCfg.curHeader="",this.curendpoint.headers_to_pass=[],this.curendpoint.querystring_params=[]},setExtraConfig(e,t){this.curendpoint.extra_config[e]=t},removeExtraConfig(e){delete this.curendpoint.extra_config[e]},switchSequential(e){void 0!==this.melody_proxy.sequential&&(this.melody_proxy.sequential=e)},switchRateLimit(e){this.curendpoint["extra_config"]["melody_ratelimit_router"]&&!e&&(this.curendpoint["extra_config"]["melody_ratelimit_router"]={})},switchJWTvalidation(e){e||this.curendpoint["extra_config"]["melody_jose_validator"]&&(this.curendpoint["extra_config"]["melody_jose_validator"]={})},switchJWTsigning(e){e||this.curendpoint["extra_config"]["melody_jose_signer"]&&(this.curendpoint["extra_config"]["melody_jose_signer"]={})},switchStaticResponse(e){e?this.melody_proxy["static"]=JSON.parse(JSON.stringify(this.resstatic)):delete this.melody_proxy["static"]},setStrategyKey(){void 0!==this.curendpoint["extra_config"]["melody_ratelimit_router"]["strategy"]&&void 0!==this.curendpoint["extra_config"]["melody_ratelimit_router"]["key"]&&"ip"===this.curendpoint["extra_config"]["melody_ratelimit_router"]["strategy"]&&delete this.curendpoint["extra_config"]["melody_ratelimit_router"]["key"]},switchNonObject(e){!0===e.is_collection&&(e.target="")},addBackendWhitelist(e){void 0!=e&&this.white&&-1==e.whitelist.indexOf(this.white)&&e.whitelist.push(this.white)},addBackendBlacklist(e){console.log(e),void 0!=e&&this.black&&-1==e.blacklist.indexOf(this.black)&&e.blacklist.push(this.black)},removeBackendWhitelist(e,t){e.whitelist.splice(t,1)},removeBackendBlacklist(e,t){e.blacklist.splice(t,1)},addMapping(e){e.mapping[this.back.o]=this.back.r+"",this.curendpoint=JSON.parse(JSON.stringify(this.curendpoint))},removeMapping(e,t){delete e.mapping[t],this.curendpoint=JSON.parse(JSON.stringify(this.curendpoint))},reSetcheckHosts(e){e.host=this.checkHosts},splitHost(e){let t=e.split(" - ");return t[1]},delBackend(e){this.curendpoint.backends.splice(e,1)},setSD(e){return void 0!==e.sd&&""!==e.sd||(e.sd="static"),e.host=[],e.sd},isJSON(e){if("string"==typeof e)try{return JSON.parse(e),e.indexOf("{")>-1}catch(t){return!1}return!1},delStaticRes(){this.curendpoint["extra_config"]["melody_proxy"]["static"]&&(delete this.curendpoint["extra_config"]["melody_proxy"]["static"],this.curendpoint=JSON.parse(JSON.stringify(this.curendpoint)),this.enableStaticRes=!1)},changeResdata(){if(this.isJSON(this.resdata)){let e=document.getElementById("resStaticTip");void 0===e&&null===e||(e.innerHTML='<span style="color:green">格式正确</span>'),this.curendpoint["extra_config"]["melody_proxy"]["static"]["data"]=JSON.parse(this.resdata),this.curendpoint=JSON.parse(JSON.stringify(this.curendpoint))}else{let e=document.getElementById("resStaticTip");void 0===e&&null===e||(e.innerHTML='<span style="color:red">格式错误</span>')}},changeStrategy(){this.curendpoint=JSON.parse(JSON.stringify(this.curendpoint))}},computed:{serviceCfg(){return this.$store.getters.serviceConfig}},watch:{serviceCfg:{handler:function(e){e.endpoints===[]||void 0===e.endpoints?(this.clearCacheHandle(),this.isEndpointsNone=!0,this.$router.push("/")):(this.curendpoint=JSON.parse(JSON.stringify(this.curendpoint)),this.isEndpointsNone=!1)},deep:!0},$route(){void 0!=this.$route.params.url&&(this.curendpoint=this.endpoints[1*this.$route.params.url]),this.setInit()},curendpoint:{handler:function(){this.config=this.$store.getters.serviceConfig,this.endpoints=this.config.endpoints||[],this.curendpoint=this.endpoints[1*this.$route.params.url],this.$store.commit("updateServiceConfig",this.config)},deep:!0}}},c=o,d=(i("09a0"),i("2877")),u=Object(d["a"])(c,n,a,!1,null,"14a3a4fe",null);t["default"]=u.exports},"5f02":function(e,t,i){},9641:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("el-card",{staticClass:"box-card item"},[i("el-collapse",{attrs:{value:e.activeList}},[e._t("default")],2)],1)],1)},a=[],l={computed:{activeList(){return this.$ls.get("active_cards")}}},r=l,s=i("2877"),o=Object(s["a"])(r,n,a,!1,null,"db2c75f6",null);t["a"]=o.exports},ffad:function(e,t,i){"use strict";class n{constructor(){this.url_pattern="/new-point",this.method="GET",this.extra_config={melody_ratelimit_proxy:{},melody_http:{}},this.host=[],this.encoding="json",this.blacklist=[],this.whitelist=[],this.mapping={},this.is_collection=!1,this.disable_host_sanitize=!1}}t["a"]=n}}]);
//# sourceMappingURL=chunk-c15e347a.32429e6f.js.map