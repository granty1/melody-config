(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0cc130c0"],{"0495":function(e,t,o){e.exports=o.p+"img/melodylogo.045441fc.png"},"082c":function(e,t,o){"use strict";o.r(t);var n=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("header",{staticClass:"navbar"},[n("el-row",[n("el-col",{attrs:{span:5}},[n("img",{staticClass:"navbar-logo",attrs:{src:o("0495"),alt:""},on:{click:e.setCollapse}}),n("span",{staticClass:"myhidden"},[e._v("Melody Configer")])]),n("el-col",{staticClass:"navbar-list",attrs:{span:14}},[n("div",[n("span",{on:{click:function(t){return e.goto("https://granty1.github.io/melody-web/")}}},[e._v("特性")]),n("span",{on:{click:function(t){return e.goto("https://github.com/granty1/melody/releases/tag/v1.0.0")}}},[e._v("下载")]),n("span",{on:{click:function(t){return e.goto("https://granty1.github.io/melody-docs/")}}},[e._v("功能文档")])])]),n("el-col",{attrs:{span:5}},[n("el-button",{staticClass:"save_button",attrs:{type:"text",icon:"el-icon-download",size:"small"},on:{click:e.exportConfig}},[n("span",[e._v("保存配置")])]),n("el-button",{staticClass:"save_button",attrs:{type:"text",icon:"el-icon-refresh",size:"small"},on:{click:e.clearCache}},[n("span",[e._v("清除缓存")])])],1)],1)],1),n("router-view",{staticClass:"main"}),n("div",{staticClass:"footer"},[e._v("MIT Licensed | Copyright © 2020 ❤️ Melody-Team")])],1)},i=[],s=o("21a6"),a=o.n(s),r=o("5c96"),l=o("0b45"),c={name:"BaseLayout",data(){return{isCollapse:this.$store.getters.isCollapse}},methods:{goto(e){window.location.href=e},clrConfig(e){if(e&&e.endpoints){let t=e.endpoints;for(let e in t){let o=t[e];this.clearExtra(o);for(let e in o)o[e]&&"{}"!==JSON.stringify(o[e])&&0!==o[e].length||delete o[e];if(o["backends"]){let e=o["backends"];for(let t in e){let o=e[t];this.clearExtra(o);for(let e in o)o[e]&&"{}"!==JSON.stringify(o[e])&&0!==o[e].length||delete o[e]}}}}},clearExtra(e){if(e.extra_config)for(let t in e.extra_config)if(e.extra_config[t])if("{}"===JSON.stringify(e.extra_config[t]))delete e.extra_config[t];else{let o=!1,n=e.extra_config[t];for(let e in n){if(""!==n[e]){o=!0;break}if(!0===n[e]){o=!0;break}if("object"==typeof n[e]&&"{}"!==JSON.stringify(n[e])){o=!0;break}if(n[e].length>=1){o=!0;break}}o||delete e.extra_config[t]}},exportConfig(){let e=this.$ls.get("config");if(e){this.clrConfig(e);let t=r["Loading"].service({fullscreen:!0,spinner:"el-icon-loading",text:"Loading",background:"rgba(0, 0, 0, 0.8)"}),o=JSON.stringify(e,null,4),n=new Blob([o],{type:""});setTimeout(()=>{this.$nextTick(()=>{t.close(),a.a.saveAs(n,"melody.json")})},2500)}},clearCache(){this.$confirm("此操作将清除所有配置缓存, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{this.$store.commit("updateServiceConfig",{}),this.$ls.remove("logging"),this.$ls.remove("safe");let e=null===this.$ls.get("config")?{}:this.$ls.get("config");e.version=1,e.output_encoding=void 0==e.output_encoding?"json":e.output_encoding,e.disable_rest=void 0!=e.disable_rest&&e.disable_rest,e.extra_config=void 0==e.extra_config?{}:e.extra_config,this.$store.commit("updateServiceConfig",e);let t=null===this.$ls.get("active_cards")?l["a"].defaultActiveCards:this.$ls.get("active_cards");this.$store.commit("updateActiveCards",t);let o=[];this.$store.commit("setAvailableHosts",o),this.$router.push("/"),this.$message({type:"success",message:"删除成功!"})}).catch(()=>{this.$message({type:"info",message:"已取消删除"})})},setCollapse(){this.$store.commit("setIsCollapse",!this.isCollapse),this.isCollapse=this.$store.getters.isCollapse}}},f=c,u=(o("1b16"),o("2877")),d=Object(u["a"])(f,n,i,!1,null,"4d878826",null);t["default"]=d.exports},"1b16":function(e,t,o){"use strict";var n=o("611d"),i=o.n(n);i.a},"21a6":function(e,t,o){(function(o){var n,i,s;(function(o,a){i=[],n=a,s="function"===typeof n?n.apply(t,i):n,void 0===s||(e.exports=s)})(0,(function(){"use strict";function t(e,t){return"undefined"==typeof t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}function n(e,t,o){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){r(n.response,t,o)},n.onerror=function(){console.error("could not download file")},n.send()}function i(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&299>=t.status}function s(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(n){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var a="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof o&&o.global===o?o:void 0,r=a.saveAs||("object"!=typeof window||window!==a?function(){}:"download"in HTMLAnchorElement.prototype?function(e,t,o){var r=a.URL||a.webkitURL,l=document.createElement("a");t=t||e.name||"download",l.download=t,l.rel="noopener","string"==typeof e?(l.href=e,l.origin===location.origin?s(l):i(l.href)?n(e,t,o):s(l,l.target="_blank")):(l.href=r.createObjectURL(e),setTimeout((function(){r.revokeObjectURL(l.href)}),4e4),setTimeout((function(){s(l)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,o,a){if(o=o||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(t(e,a),o);else if(i(e))n(e,o,a);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout((function(){s(r)}))}}:function(e,t,o,i){if(i=i||open("","_blank"),i&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof e)return n(e,t,o);var s="application/octet-stream"===e.type,r=/constructor/i.test(a.HTMLElement)||a.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||s&&r)&&"object"==typeof FileReader){var c=new FileReader;c.onloadend=function(){var e=c.result;e=l?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=e:location=e,i=null},c.readAsDataURL(e)}else{var f=a.URL||a.webkitURL,u=f.createObjectURL(e);i?i.location=u:location.href=u,i=null,setTimeout((function(){f.revokeObjectURL(u)}),4e4)}});a.saveAs=r.saveAs=r,e.exports=r}))}).call(this,o("c8ba"))},"611d":function(e,t,o){}}]);
//# sourceMappingURL=chunk-0cc130c0.343cf02e.js.map